(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1467],{978:function(e,n,t){Promise.resolve().then(t.bind(t,5439))},5439:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return o}});var r=t(7437),i=t(2265),s=t(9376),l=t(6281),u=t(8976),a=t(9042);function o(){let{user:e,loading:n}=(0,l.a)(),{hasInPerson:t,loading:o}=(0,u.m)(),c=(0,s.useRouter)();return((0,i.useEffect)(()=>{if(!n&&!o&&!t){c.push("/analyzer/free");return}},[n,o,t,c]),n||o)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):(0,r.jsxs)(r.Fragment,{children:[!1,(0,r.jsx)(a.Z,{mode:"in-person"})]})}},8976:function(e,n,t){"use strict";t.d(n,{m:function(){return s}});var r=t(2265);let i=(0,t(9997).B)();function s(){let[e,n]=(0,r.useState)(!0),[t,s]=(0,r.useState)({first_time:!1,in_person:!1,bundle:!1}),l=(0,r.useCallback)(async()=>{try{n(!0);let{data:{user:e}}=await i.auth.getUser();if(!e){s({first_time:!1,in_person:!1,bundle:!1}),n(!1);return}let{data:t,error:r}=await i.from("user_entitlements").select("first_time, in_person, bundle").eq("user_id",e.id).single();r?"PGRST116"===r.code?s({first_time:!1,in_person:!1,bundle:!1}):console.error("[useEntitlements] Error fetching entitlements:",r):s({first_time:(null==t?void 0:t.first_time)||!1,in_person:(null==t?void 0:t.in_person)||!1,bundle:(null==t?void 0:t.bundle)||!1})}catch(e){console.error("[useEntitlements] Error:",e)}finally{n(!1)}},[]);(0,r.useEffect)(()=>{l();let{data:{subscription:e}}=i.auth.onAuthStateChange(()=>{l()});return()=>{e.unsubscribe()}},[l]);let u=t.first_time||t.bundle,a=t.in_person||t.bundle,o=t.bundle;return{loading:e,entitlements:t,hasFirstTime:u,hasInPerson:a,hasBundle:o,refreshEntitlements:l}}}},function(e){e.O(0,[4033,9042,2971,2117,1744],function(){return e(e.s=978)}),_N_E=e.O()}]);