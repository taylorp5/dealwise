(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{4563:function(e,s,t){Promise.resolve().then(t.bind(t,1856))},1856:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var r=t(7437),n=t(2265),a=t(9376),o=t(6281),i=t(9997),l=t(9178),u=t(4226),c=t(3583);let d=(0,i.B)();function m(){let e=(0,a.useRouter)(),{user:s,loading:t}=(0,o.a)(),[i,m]=(0,n.useState)(""),[h,g]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),[v,w]=(0,n.useState)(!1),[y,N]=(0,n.useState)(null);(0,n.useEffect)(()=>{t||s||e.push("/login")},[s,t,e]);let j=async e=>{if(e.preventDefault(),x(!0),b(null),w(!1),i!==h){b("Passwords do not match"),x(!1);return}if(i.length<8){b("Password must be at least 8 characters"),x(!1);return}console.log("[Settings] Calling updateUser to set password");try{let{data:e,error:s}=await d.auth.updateUser({password:i});if(console.log("[Settings] updateUser response:",{hasData:!!e,hasUser:!!(null==e?void 0:e.user),hasError:!!s,errorMessage:null==s?void 0:s.message,errorStatus:null==s?void 0:s.status,errorName:null==s?void 0:s.name}),s){console.error("[Settings] updateUser ERROR:",{method:"updateUser",httpStatus:s.status,message:s.message,name:s.name,fullError:s});let e=s.message||"Failed to set password. Please try again.";b(e),N({message:e,type:"error"}),x(!1);return}console.log("[Settings] updateUser SUCCESS - Password set"),w(!0),m(""),g(""),N({message:"Password set. You can now sign in with email + password too.",type:"success"}),x(!1)}catch(e){console.error("[Settings] updateUser EXCEPTION:",{method:"updateUser",message:e.message,name:e.name,stack:e.stack}),b(e.message||"An error occurred. Please try again."),N({message:e.message||"An error occurred. Please try again.",type:"error"}),x(!1)}};return t?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):s?(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsx)(c.Z,{message:y.message,type:y.type,onClose:()=>N(null)}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your account settings"})]}),(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:"Password"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Set a password to sign in with email and password. If you originally signed up with Google, this will allow you to use email/password sign-in too."}),v&&(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("p",{className:"text-sm text-green-700",children:"Password set successfully! You can now sign in with email + password."})}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[f&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:f})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,r.jsx)("input",{id:"password",type:"password",value:i,onChange:e=>m(e.target.value),required:!0,minLength:8,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter new password"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:h,onChange:e=>g(e.target.value),required:!0,minLength:8,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm new password"})]}),(0,r.jsx)(u.Z,{type:"submit",disabled:p,children:p?"Setting password...":"Set Password"})]})]})})]})})]}):null}},3583:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(7437),n=t(2265);function a(e){let{message:s,type:t,onClose:a,duration:o=5e3}=e;return(0,n.useEffect)(()=>{let e=setTimeout(()=>{a()},o);return()=>clearTimeout(e)},[a,o]),(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top-5",children:(0,r.jsxs)("div",{className:"".concat({error:"bg-red-500",success:"bg-green-500",info:"bg-blue-500"}[t]," text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[300px] max-w-md"),children:[(0,r.jsx)("p",{className:"flex-1 text-sm font-medium",children:s}),(0,r.jsx)("button",{onClick:a,className:"text-white hover:text-gray-200 transition-colors","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}},4226:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var r=t(7437);function n(e){let{variant:s="primary",size:t="md",className:n="",children:a,...o}=e;return(0,r.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t]," ").concat(n),...o,children:a})}t(2265)},9178:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var r=t(7437);function n(e){let{children:s,className:t=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(t),children:s})}t(2265)},6281:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return l},a:function(){return u}});var r=t(7437),n=t(2265);let a=(0,t(9997).B)(),o=()=>{{let e="https://vabikejehdmpfcyqrgrs.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q";return!!(e&&s&&e.length>10&&s.length>10&&!e.includes("placeholder"))}},i=(0,n.createContext)(void 0);function l(e){let{children:s}=e,[t,l]=(0,n.useState)(null),[u,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!o()){console.warn("Supabase not configured. Running in unauthenticated mode."),l(null),c(!1);return}let e=!0,s=null;(async()=>{try{let{data:{session:t},error:r}=await a.auth.getSession();if(!e)return;if(r)console.error("[AuthContext] Error getting initial session:",r),l(null);else{var s;console.log("[AuthContext] Initial session:",t?"User: ".concat(t.user.email):"No session"),l(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)}c(!1)}catch(s){if(!e)return;console.error("[AuthContext] Error initializing auth:",s),l(null),c(!1)}})();let{data:{subscription:t}}=a.auth.onAuthStateChange(async(s,t)=>{var r;e&&(console.log("[AuthContext] Auth state changed:",s,t?"User: ".concat(t.user.email):"No session"),l(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),c(!1))});return s=t,()=>{e=!1,s&&s.unsubscribe()}},[]);let d=async()=>{o()&&await a.auth.signOut(),l(null)};return(0,r.jsx)(i.Provider,{value:{user:t,loading:u,signOut:d},children:s})}function u(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9997:function(e,s,t){"use strict";t.d(s,{B:function(){return o}});var r=t(4033);let n="https://vabikejehdmpfcyqrgrs.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q";if(!n||!a){let e=[];throw n||e.push("NEXT_PUBLIC_SUPABASE_URL"),a||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("[CRITICAL] Missing required Supabase environment variables: ".concat(e.join(", "),". ")+"These must be set in Vercel environment variables and available at build time.")}if(n.includes("placeholder")||a.includes("placeholder")){let e=[];throw n.includes("placeholder")&&e.push("NEXT_PUBLIC_SUPABASE_URL"),a.includes("placeholder")&&e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("[CRITICAL] Supabase environment variables contain placeholder values. Please set real values in Vercel environment variables. "+"Found placeholder in: ".concat(e.join(" and ")))}if(n.length<10||a.length<10)throw Error("[CRITICAL] Supabase environment variables appear to be invalid (too short). Please verify they are set correctly in Vercel.");function o(){return(0,r.createBrowserClient)(n,a)}},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[33,971,117,744],function(){return e(e.s=4563)}),_N_E=e.O()}]);