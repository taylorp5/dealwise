(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5783:function(e,s,r){Promise.resolve().then(r.bind(r,6374))},6374:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return m}});var t=r(7437),a=r(2265),n=r(9376),o=r(7648),l=r(9997),i=r(9178),c=r(4226),u=r(3583);let d=(0,l.B)();function m(){let e=(0,n.useRouter)(),[s,r]=(0,a.useState)(""),[l,m]=(0,a.useState)(""),[g,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(""),[w,j]=(0,a.useState)(!1),[N,P]=(0,a.useState)(!1),[S,C]=(0,a.useState)(null),I=async()=>{h(!0),p(null);try{let{error:e}=await d.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});e&&(p(e.message),h(!1))}catch(e){p(e.message||"An error occurred"),h(!1)}},E=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),A=async e=>{if(e.preventDefault(),j(!0),p(null),!y.trim()){p("Please enter your email address"),j(!1);return}if(!E(y)){p("Please enter a valid email address"),j(!1);return}console.log("[AUTH] Calling resetPasswordForEmail for:",y),console.log("[AUTH] Redirect URL:","".concat(window.location.origin,"/auth/reset"));try{let{data:e,error:s}=await d.auth.resetPasswordForEmail(y,{redirectTo:"".concat(window.location.origin,"/auth/reset")});if(console.log("[AUTH] resetPasswordForEmail response:",{hasData:!!e,hasError:!!s,errorMessage:null==s?void 0:s.message,errorStatus:null==s?void 0:s.status,errorName:null==s?void 0:s.name}),s){console.error("[AUTH] resetPasswordForEmail ERROR:",{method:"resetPasswordForEmail",httpStatus:s.status,message:s.message,name:s.name,fullError:s});let e=s.message||"Failed to send password reset email. Please try again.";p(e),C({message:e,type:"error"}),j(!1);return}console.log("[AUTH] resetPasswordForEmail SUCCESS - email should be sent"),P(!0),C({message:"Password reset email sent! Check your inbox.",type:"success"}),j(!1)}catch(e){console.error("[AUTH] resetPasswordForEmail EXCEPTION:",{method:"resetPasswordForEmail",message:e.message,name:e.name,stack:e.stack}),p(e.message||"An error occurred. Please try again."),j(!1)}},k=async r=>{if(r.preventDefault(),h(!0),p(null),!E(s)){p("Please enter a valid email address"),h(!1);return}console.log("[AUTH] Calling signInWithPassword for:",s);try{var t,a,n;let{data:r,error:o}=await d.auth.signInWithPassword({email:s,password:l});if(console.log("[AUTH] signInWithPassword response:",{hasData:!!r,hasUser:!!(null==r?void 0:r.user),hasSession:!!(null==r?void 0:r.session),userEmail:null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.email,hasError:!!o,errorMessage:null==o?void 0:o.message,errorStatus:null==o?void 0:o.status,errorName:null==o?void 0:o.name}),o){console.error("[AUTH] signInWithPassword ERROR:",{method:"signInWithPassword",httpStatus:o.status,message:o.message,name:o.name,fullError:o});let e=o.message||"Sign in failed. Please try again.";((null===(a=o.message)||void 0===a?void 0:a.toLowerCase().includes("invalid"))||(null===(n=o.message)||void 0===n?void 0:n.toLowerCase().includes("credentials"))||400===o.status)&&(e="Invalid email or password. If you originally signed up with Google, use Google sign-in or set a password in Settings."),p(e),C({message:e,type:"error"}),h(!1);return}r.user?(console.log("[AUTH] signInWithPassword SUCCESS - user:",r.user.email),e.push("/"),e.refresh()):(console.error("[AUTH] signInWithPassword - No user in response"),p("Sign in failed. No user data received."),h(!1))}catch(e){console.error("[AUTH] signInWithPassword EXCEPTION:",{method:"signInWithPassword",message:e.message,name:e.name,stack:e.stack}),p(e.message||"An error occurred. Please check your connection and try again."),h(!1)}};return(0,t.jsxs)(t.Fragment,{children:[S&&(0,t.jsx)(u.Z,{message:S.message,type:S.type,onClose:()=>C(null)}),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sign In"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Sign in to your DealWise account"})]}),(0,t.jsxs)(i.Z,{children:[(0,t.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[x&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:x})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>r(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"you@example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),(0,t.jsx)("input",{id:"password",type:"password",value:l,onChange:e=>m(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"})]}),f&&(0,t.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-4",children:N?(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-green-700",children:"Check your email for a password reset link. If you don't see it, check your spam folder."}),(0,t.jsx)("button",{type:"button",onClick:()=>{b(!1),P(!1),v("")},className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Back to sign in"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Reset Password"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."}),(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,t.jsxs)("p",{className:"text-xs text-yellow-800",children:[(0,t.jsx)("strong",{children:"Note:"})," Password reset emails may not arrive yet. If you originally signed up with Google, use Google sign-in or set a password in Settings."]})}),(0,t.jsxs)("form",{onSubmit:A,className:"space-y-3",children:[(0,t.jsx)("input",{type:"email",value:y,onChange:e=>v(e.target.value),placeholder:"you@example.com",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.Z,{type:"submit",disabled:w,className:"flex-1",children:w?"Sending...":"Send Reset Link"}),(0,t.jsx)(c.Z,{type:"button",onClick:()=>{b(!1),v(""),p(null)},className:"flex-1 bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"})]})]})]})}),(0,t.jsxs)("button",{type:"button",onClick:I,disabled:g,className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[(0,t.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Continue with Google"})]}),(0,t.jsx)(c.Z,{type:"submit",className:"w-full",disabled:g,children:g?"Signing in...":"Sign In"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,t.jsx)(o.default,{href:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})})]})]})})]})}},3583:function(e,s,r){"use strict";r.d(s,{Z:function(){return n}});var t=r(7437),a=r(2265);function n(e){let{message:s,type:r,onClose:n,duration:o=5e3}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{n()},o);return()=>clearTimeout(e)},[n,o]),(0,t.jsx)("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top-5",children:(0,t.jsxs)("div",{className:"".concat({error:"bg-red-500",success:"bg-green-500",info:"bg-blue-500"}[r]," text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[300px] max-w-md"),children:[(0,t.jsx)("p",{className:"flex-1 text-sm font-medium",children:s}),(0,t.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 transition-colors","aria-label":"Close",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}},4226:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});var t=r(7437);function a(e){let{variant:s="primary",size:r="md",className:a="",children:n,...o}=e;return(0,t.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(a),...o,children:n})}r(2265)},9178:function(e,s,r){"use strict";r.d(s,{Z:function(){return a}});var t=r(7437);function a(e){let{children:s,className:r=""}=e;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(r),children:s})}r(2265)},9997:function(e,s,r){"use strict";r.d(s,{B:function(){return o}});var t=r(4033);let a="https://vabikejehdmpfcyqrgrs.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q";if(!a||!n){let e=[];throw a||e.push("NEXT_PUBLIC_SUPABASE_URL"),n||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("[CRITICAL] Missing required Supabase environment variables: ".concat(e.join(", "),". ")+"These must be set in Vercel environment variables and available at build time.")}if(a.includes("placeholder")||n.includes("placeholder")){let e=[];throw a.includes("placeholder")&&e.push("NEXT_PUBLIC_SUPABASE_URL"),n.includes("placeholder")&&e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("[CRITICAL] Supabase environment variables contain placeholder values. Please set real values in Vercel environment variables. "+"Found placeholder in: ".concat(e.join(" and ")))}if(a.length<10||n.length<10)throw Error("[CRITICAL] Supabase environment variables appear to be invalid (too short). Please verify they are set correctly in Vercel.");function o(){return(0,t.createBrowserClient)(a,n)}},9376:function(e,s,r){"use strict";var t=r(5475);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[33,648,971,117,744],function(){return e(e.s=5783)}),_N_E=e.O()}]);