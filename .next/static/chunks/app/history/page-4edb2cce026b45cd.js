(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{3981:function(e,t,n){Promise.resolve().then(n.bind(n,8615))},8615:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n(7437),r=n(2265),a=n(9376),i=n(9178),l=n(4226),c=n(6281);let u=(0,n(9997).B)();function o(){let{user:e,loading:t}=(0,c.a)(),n=(0,a.useRouter)(),[o,d]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{e&&g()},[e]);let g=async()=>{if(e)try{let{data:t,error:n}=await u.from("deals").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(n)throw n;d(t||[])}catch(e){console.error("Error loading deals:",e)}finally{m(!1)}};return t||h?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deal History"}),(0,s.jsx)("p",{className:"text-gray-600",children:"View your past negotiations and analyses"})]}),0===o.length?(0,s.jsx)(i.Z,{className:"p-6 lg:p-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"No deals yet. Start by analyzing a listing or generating a script!"})}):(0,s.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,s.jsx)(i.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title||"Untitled Deal"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:new Date(e.created_at).toLocaleDateString()})]}),(0,s.jsx)(l.Z,{size:"sm",variant:"secondary",onClick:()=>n.push("/history/".concat(e.id)),children:"View"})]})},e.id))})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Please sign in to use this feature"}),(0,s.jsx)("a",{href:"/login",className:"text-blue-600 hover:text-blue-700",children:"Sign In"})]})})}},4226:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437);function r(e){let{variant:t="primary",size:n="md",className:r="",children:a,...i}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]," ").concat(r),...i,children:a})}n(2265)},9178:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437);function r(e){let{children:t,className:n=""}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(n),children:t})}n(2265)},6281:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return c},a:function(){return u}});var s=n(7437),r=n(2265);let a=(0,n(9997).B)(),i=()=>{{let e="https://vabikejehdmpfcyqrgrs.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q";return!!(e&&t&&e.length>10&&t.length>10&&!e.includes("placeholder"))}},l=(0,r.createContext)(void 0);function c(e){let{children:t}=e,[n,c]=(0,r.useState)(null),[u,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!i()){console.warn("Supabase not configured. Running in unauthenticated mode."),c(null),o(!1);return}let e=!0,t=null;(async()=>{try{let{data:{session:n},error:s}=await a.auth.getSession();if(!e)return;if(s)console.error("[AuthContext] Error getting initial session:",s),c(null);else{var t;console.log("[AuthContext] Initial session:",n?"User: ".concat(n.user.email):"No session"),c(null!==(t=null==n?void 0:n.user)&&void 0!==t?t:null)}o(!1)}catch(t){if(!e)return;console.error("[AuthContext] Error initializing auth:",t),c(null),o(!1)}})();let{data:{subscription:n}}=a.auth.onAuthStateChange(async(t,n)=>{var s;e&&(console.log("[AuthContext] Auth state changed:",t,n?"User: ".concat(n.user.email):"No session"),c(null!==(s=null==n?void 0:n.user)&&void 0!==s?s:null),o(!1))});return t=n,()=>{e=!1,t&&t.unsubscribe()}},[]);let d=async()=>{i()&&await a.auth.signOut(),c(null)};return(0,s.jsx)(l.Provider,{value:{user:n,loading:u,signOut:d},children:t})}function u(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9997:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var s=n(4033);let r="https://vabikejehdmpfcyqrgrs.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q";if(!r||!a){let e=[];throw r||e.push("NEXT_PUBLIC_SUPABASE_URL"),a||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("[CRITICAL] Missing required Supabase environment variables: ".concat(e.join(", "),". ")+"These must be set in Vercel environment variables and available at build time.")}if(r.includes("placeholder")||a.includes("placeholder")){let e=[];throw r.includes("placeholder")&&e.push("NEXT_PUBLIC_SUPABASE_URL"),a.includes("placeholder")&&e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("[CRITICAL] Supabase environment variables contain placeholder values. Please set real values in Vercel environment variables. "+"Found placeholder in: ".concat(e.join(" and ")))}if(r.length<10||a.length<10)throw Error("[CRITICAL] Supabase environment variables appear to be invalid (too short). Please verify they are set correctly in Vercel.");function i(){return(0,s.createBrowserClient)(r,a)}},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[33,971,117,744],function(){return e(e.s=3981)}),_N_E=e.O()}]);