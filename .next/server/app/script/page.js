(()=>{var e={};e.id=4452,e.ids=[4452],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},64659:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.Z,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>x,tree:()=>o}),t(29855),t(46855),t(26083),t(35866);var a=t(23191),r=t(88716),l=t(48001),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let o=["",{children:["script",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,29855)),"C:\\dev\\Dealership Copilot\\app\\script\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,46855)),"C:\\dev\\Dealership Copilot\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,26083)),"C:\\dev\\Dealership Copilot\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\dev\\Dealership Copilot\\app\\script\\page.tsx"],c="/script/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/script/page",pathname:"/script",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},47510:(e,s,t)=>{Promise.resolve().then(t.bind(t,70866))},70866:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(10326),r=t(17577),l=t(35047),i=t(8903),n=t(21021),o=t(3679);function d({title:e="Financing & Terms Helper",className:s=""}){return a.jsx(n.Z,{className:`bg-blue-50/50 border border-blue-200 ${s}`,children:(0,a.jsxs)("div",{className:"p-5 lg:p-6",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:e}),a.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Understanding financing terms is crucial. Here's some educational guidance:"}),(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-gray-700",children:[(0,a.jsxs)("li",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:"APR (Annual Percentage Rate):"})," The annual cost of borrowing money, including interest and other fees. A lower APR means lower monthly payments and less total interest paid."]}),(0,a.jsxs)("li",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Term Length:"})," The duration of the loan (e.g., 36, 48, 60, 72 months). Longer terms mean lower monthly payments but more total interest paid over time."]}),(0,a.jsxs)("li",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Dealer Financing vs. Credit Union/Bank:"})," Dealers often offer financing, but it's wise to get pre-approved from your bank or credit union first to compare rates and leverage."]}),(0,a.jsxs)("li",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Contingencies:"})," Sometimes a low APR is contingent on purchasing additional products (e.g., extended warranty, GAP insurance). Always clarify this."]})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-700 font-medium",children:"Questions to ask:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700",children:[a.jsx("li",{children:'"Is this rate contingent on any dealer add-ons or products?"'}),a.jsx("li",{children:'"What is the exact APR and term length for this loan?"'}),a.jsx("li",{children:'"Can I see a breakdown of all fees included in the financing?"'})]})]})})}var c=t(87466);let m=(0,i.B)();function x({user:e,initialCarContext:s,prefilledDealId:t,onComplete:i,onCancel:x,activePackId:u,unlockedPackIds:h=[]}){let p=(0,l.useRouter)(),[g,b]=(0,r.useState)("communication_method"),[y,f]=(0,r.useState)({carContext:s||""}),[v,j]=(0,r.useState)({}),[N,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(!1),[_,P]=(0,r.useState)(null),[S,q]=(0,r.useState)(!1),[T,O]=(0,r.useState)([]),[A,D]=(0,r.useState)(!1),[F,R]=(0,r.useState)(!1),Z=u?c.l[u]:null,M=!!u&&h.includes(u),I=(0,r.useMemo)(()=>{let e=["communication_method","payment_method","experience_level","negotiation_stage","help_needed","car_context"];return M&&Z?.questions&&Z.questions.length>0?["pack_questions",...e]:e},[M,Z]),B=(e,s)=>{f(t=>({...t,[e]:s}));let t=I.indexOf(g);t<I.length-1&&b(I[t+1])},G=()=>{let e=I.indexOf(g);e>0&&b(I[e-1])},z=async()=>{if(!y.carContext||!y.communicationMethod||!y.paymentMethod||!y.experienceLevel||!y.currentStage||!y.helpNeeded){P("Please complete all steps");return}C(!0),P(null);try{let{data:{session:e}}=await m.auth.getSession(),s={"Content-Type":"application/json"};e?.access_token&&(s.Authorization=`Bearer ${e.access_token}`);let a=await fetch("/api/generate-script",{method:"POST",headers:s,body:JSON.stringify({wizardAnswers:y,carContext:y.carContext,dealId:t,competitiveOffers:T.length>0?T:void 0,packType:M?u:void 0,packAnswers:M?v:void 0})}),r=await a.json();if(!r.success)throw Error(r.error||"Failed to generate script");w(r.data),b("results"),i&&i(r.data),("financing_questions"===y.helpNeeded||"finance"===y.paymentMethod)&&q(!0)}catch(e){P(e.message||"Failed to generate script")}finally{C(!1)}},H=I.indexOf(g),E="results"===g?100:(H+1)/I.length*100;return(0,a.jsxs)(n.Z,{className:"p-6 lg:p-8",children:[u&&(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs font-semibold px-3 py-1 rounded-full bg-blue-100 text-blue-700",children:["Active Pack: ",Z?.name||u]}),!M&&a.jsx("span",{className:"text-xs font-semibold px-3 py-1 rounded-full bg-gray-100 text-gray-600",children:"Locked - unlock to enable pack questions & prompts"})]}),a.jsx(o.Z,{variant:"secondary",size:"sm",onClick:()=>p.push("/packs"),children:"Manage Packs"})]}),M&&Z?.education&&Z.education.length>0&&(0,a.jsxs)(n.Z,{className:"mb-4 bg-blue-50 border-blue-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Pack Education"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:Z.education.map(e=>a.jsx("li",{children:e},e))})]}),"results"!==g&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsxs)("span",{children:["Step ",H+1," of ",I.length]}),(0,a.jsxs)("span",{children:[Math.round(E),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${E}%`}})})]}),_&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-700 text-sm",children:_})}),k&&"results"!==g?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Generating your personalized script..."})]}):a.jsx("div",{children:(()=>{switch(g){case"pack_questions":if(!Z||!M||!Z.questions||0===Z.questions.length)return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Pack Questions"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pack questions unavailable."}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(o.Z,{onClick:G,variant:"secondary",children:"Back"}),a.jsx(o.Z,{onClick:()=>b(I[I.indexOf("pack_questions")+1]||"communication_method"),children:"Continue"})]})]});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[Z.name," Questions"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Answer these to tailor your script for this pack."}),a.jsx("div",{className:"space-y-4",children:Z.questions.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-900",children:[e.label," ",e.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),e.helpText&&a.jsx("p",{className:"text-xs text-gray-600",children:e.helpText}),"select"===e.type&&e.options&&(0,a.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:v[e.id]??"",onChange:s=>j(t=>({...t,[e.id]:s.target.value})),children:[a.jsx("option",{value:"",children:"Select..."}),e.options.map(e=>a.jsx("option",{value:String(e.value),children:e.label},String(e.value)))]}),"number"===e.type&&a.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:e.placeholder,value:v[e.id]??"",onChange:s=>j(t=>({...t,[e.id]:s.target.value?Number(s.target.value):""}))}),"text"===e.type&&a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:e.placeholder,value:v[e.id]??"",onChange:s=>j(t=>({...t,[e.id]:s.target.value}))}),"textarea"===e.type&&a.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:4,placeholder:e.placeholder,value:v[e.id]??"",onChange:s=>j(t=>({...t,[e.id]:s.target.value}))}),"boolean"===e.type&&(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(o.Z,{type:"button",variant:!0===v[e.id]?"primary":"secondary",onClick:()=>j(s=>({...s,[e.id]:!0})),children:"Yes"}),a.jsx(o.Z,{type:"button",variant:!1===v[e.id]?"primary":"secondary",onClick:()=>j(s=>({...s,[e.id]:!1})),children:"No"})]})]},e.id))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(o.Z,{onClick:G,variant:"secondary",children:"Back"}),a.jsx(o.Z,{onClick:()=>b(I[I.indexOf("pack_questions")+1]||"communication_method"),children:"Next"})]})]});case"communication_method":return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"How are you negotiating?"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>B("communicationMethod","remote"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Remote (Email/Text)"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"I'm communicating via email or text message"})]}),(0,a.jsxs)("button",{onClick:()=>B("communicationMethod","in_person"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"In Person"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"I'm at the dealership negotiating face-to-face"})]})]})]});case"payment_method":return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"How are you planning to pay?"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>B("paymentMethod","cash"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Cash"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Paying with cash"})]}),(0,a.jsxs)("button",{onClick:()=>B("paymentMethod","finance"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Financing"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Planning to finance the purchase"})]}),(0,a.jsxs)("button",{onClick:()=>B("paymentMethod","unsure"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Not Sure Yet"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Still deciding between cash and financing"})]})]})]});case"experience_level":return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"What's your experience level?"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>B("experienceLevel","first_time"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"First-Time Buyer"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"This is my first time buying a car"})]}),(0,a.jsxs)("button",{onClick:()=>B("experienceLevel","experienced"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Experienced"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"I've bought cars before"})]})]})]});case"negotiation_stage":return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"What stage are you at?"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>B("currentStage","just_starting"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Just Starting"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Just beginning to talk to dealers"})]}),(0,a.jsxs)("button",{onClick:()=>B("currentStage","comparing_offers"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Comparing Offers"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"I have multiple offers to compare"})]}),(0,a.jsxs)("button",{onClick:()=>B("currentStage","sitting_on_offer"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Sitting on an Offer"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"I have an offer and need to respond"})]}),(0,a.jsxs)("button",{onClick:()=>B("currentStage","ready_to_close"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Ready to Close"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Finalizing the deal"})]})]})]});case"help_needed":return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"What do you need help with?"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>B("helpNeeded","negotiate_price"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Negotiate Price"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Get a better price on the vehicle"})]}),(0,a.jsxs)("button",{onClick:()=>B("helpNeeded","ask_otd"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Ask for OTD Price"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Get the out-the-door price breakdown"})]}),(0,a.jsxs)("button",{onClick:()=>B("helpNeeded","push_back_fees"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Push Back on Fees"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Challenge unnecessary fees or add-ons"})]}),(0,a.jsxs)("button",{onClick:()=>B("helpNeeded","trade_in_value"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Trade-In Value"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Negotiate trade-in value"})]}),(0,a.jsxs)("button",{onClick:()=>B("helpNeeded","financing_questions"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Financing Questions"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Ask about financing terms and options"})]}),(0,a.jsxs)("button",{onClick:()=>B("helpNeeded","general_guidance"),className:"w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[a.jsx("div",{className:"font-medium text-gray-900",children:"General Guidance"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"General negotiation help"})]})]})]});case"car_context":return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Tell us about the car"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Provide details about the vehicle you're negotiating for (make, model, year, price, mileage, etc.)"}),a.jsx("textarea",{value:y.carContext||"",onChange:e=>f(s=>({...s,carContext:e.target.value})),placeholder:"e.g., 2020 Honda Civic, 45,000 miles, listed at $25,000...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[150px]"}),"comparing_offers"===y.currentStage&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Competitive Offers"}),a.jsx(o.Z,{size:"sm",variant:"secondary",onClick:()=>{O([...T,{dealer:"",price:0,notes:""}])},children:"+ Add Offer"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add offers from other dealerships to leverage in your negotiation. The script will reference these to strengthen your position."}),A&&(0,a.jsxs)("div",{className:"text-center py-4",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading your previous offers..."})]}),T.length>0&&a.jsx("div",{className:"space-y-3",children:T.map((e,s)=>(0,a.jsxs)(n.Z,{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Dealer Name"}),a.jsx("input",{type:"text",value:e.dealer,onChange:e=>{let t=[...T];t[s].dealer=e.target.value,O(t)},placeholder:"e.g., ABC Motors",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Price"}),a.jsx("input",{type:"number",value:e.price||"",onChange:e=>{let t=[...T];t[s].price=parseFloat(e.target.value)||0,O(t)},placeholder:"e.g., 22000",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"OTD Price (optional)"}),a.jsx("input",{type:"number",value:e.otdPrice||"",onChange:e=>{let t=[...T];t[s].otdPrice=parseFloat(e.target.value)||void 0,O(t)},placeholder:"e.g., 24500",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Distance/Notes (optional)"}),a.jsx("input",{type:"text",value:e.distance||e.notes||"",onChange:e=>{let t=[...T];t[s].distance=e.target.value,t[s].notes=e.target.value,O(t)},placeholder:"e.g., 15 miles away",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx(o.Z,{size:"sm",variant:"secondary",onClick:()=>{O(T.filter((e,t)=>t!==s))},className:"mt-2",children:"Remove"})]},s))}),0===T.length&&!A&&a.jsx(n.Z,{className:"p-4 bg-gray-50 border-dashed",children:a.jsx("p",{className:"text-sm text-gray-600 text-center",children:'No competitive offers added yet. Click "Add Offer" to include offers from other dealerships.'})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(o.Z,{onClick:G,variant:"secondary",children:"Back"}),a.jsx(o.Z,{onClick:z,disabled:!y.carContext||k,children:k?"Generating...":"Generate Script"})]})]});case"results":if(!N)return null;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"pb-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Script"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ready to use"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 lg:p-8",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:N.conversationFlow?"Your Talking Points":"Your Message"}),a.jsx("div",{className:"prose max-w-none",children:a.jsx("p",{className:"text-sm lg:text-base text-gray-700 whitespace-pre-wrap leading-relaxed",children:N.script})}),a.jsx(o.Z,{onClick:()=>{navigator.clipboard.writeText(N.script),alert("Script copied to clipboard!")},size:"sm",className:"mt-4",children:"Copy to Clipboard"})]}),N.conversationFlow&&(0,a.jsxs)("div",{className:"bg-blue-50/50 border border-blue-200 rounded-lg p-6 lg:p-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Conversation Flow Guide"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Use this guide to navigate the conversation. It shows what the dealer might say and how you can respond."}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"bg-white border-2 border-blue-300 rounded-lg p-4 mb-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 font-semibold text-sm",children:"You"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Your Opening"}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:N.conversationFlow.userOpening})]})]})})}),a.jsx("div",{className:"space-y-6",children:N.conversationFlow.scenarios.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-gray-600 text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0 font-semibold text-sm",children:"Dealer"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Dealer Might Say:"}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:['"',e.dealerResponse,'"']})]})]})}),(0,a.jsxs)("div",{className:"ml-4 space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Your Response Options:"}),e.userOptions.map((e,s)=>a.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-blue-100 text-blue-700 rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 font-semibold text-xs",children:s+1}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-900 font-medium mb-1",children:['"',e.response,'"']}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 italic",children:["When to use: ",e.whenToUse]})]}),a.jsx(o.Z,{size:"sm",variant:"secondary",onClick:()=>{navigator.clipboard.writeText(e.response),alert("Response copied to clipboard!")},children:"Copy"})]})},s))]}),e.notes&&(0,a.jsxs)("div",{className:"ml-4 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs font-medium text-yellow-900 mb-1",children:"⚠️ Watch For:"}),a.jsx("p",{className:"text-xs text-yellow-800",children:e.notes})]})]},s))})]}),N.followUps&&N.followUps.length>0&&!N.conversationFlow&&(0,a.jsxs)("div",{className:"bg-blue-50/50 border border-blue-200 rounded-lg p-5 lg:p-6",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Follow-Up Responses"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If the dealer pushes back, here are responses you can use:"}),a.jsx("div",{className:"space-y-4",children:N.followUps.map((e,s)=>a.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[a.jsx("p",{className:"text-sm text-gray-700 flex-1 whitespace-pre-wrap",children:e}),a.jsx(o.Z,{size:"sm",variant:"secondary",onClick:()=>{navigator.clipboard.writeText(e),alert("Follow-up copied to clipboard!")},children:"Copy"})]})},s))})]}),N.educationalHints&&N.educationalHints.length>0&&(0,a.jsxs)("div",{className:"bg-yellow-50/50 border border-yellow-200 rounded-lg p-5 lg:p-6",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"What to Watch For"}),a.jsx("ul",{className:"space-y-2.5",children:N.educationalHints.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-yellow-600 mr-2.5 mt-0.5",children:"⚠️"}),a.jsx("span",{className:"text-sm text-gray-700 flex-1",children:e})]},s))})]}),N.keyPoints&&N.keyPoints.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-5 lg:p-6",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Key Points"}),a.jsx("ul",{className:"space-y-2",children:N.keyPoints.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-blue-600 mr-2 mt-1",children:"•"}),a.jsx("span",{className:"text-sm text-gray-700 flex-1",children:e})]},s))})]}),N.tips&&N.tips.length>0&&(0,a.jsxs)("div",{className:"bg-green-50/50 border border-green-200 rounded-lg p-5 lg:p-6",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Additional Tips"}),a.jsx("ul",{className:"space-y-2",children:N.tips.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-green-600 mr-2 mt-1",children:"\uD83D\uDCA1"}),a.jsx("span",{className:"text-sm text-gray-700 flex-1",children:e})]},s))})]}),S&&a.jsx(d,{className:"mt-6"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(o.Z,{onClick:()=>b("communication_method"),variant:"secondary",children:"Start Over"}),x&&a.jsx(o.Z,{onClick:x,variant:"secondary",children:"Done"})]})]});default:return null}})()})]})}var u=t(33136);function h(){let{user:e,loading:s}=(0,u.a)(),t=(0,l.useRouter)(),[i,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[p,g]=(0,r.useState)([]),[b,y]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null);return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx(o.Z,{variant:"secondary",size:"sm",onClick:()=>t.push("/"),className:"mb-4",children:"← Back to Home"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Negotiation Script Generator"}),a.jsx("p",{className:"text-gray-600",children:"Generate personalized negotiation scripts tailored to your situation"})]}),d&&a.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Car details pre-filled from your analysis"}),a.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"The wizard will use this information to personalize your script."})]})]})}),f&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700",children:f}),a.jsx(x,{user:e,initialCarContext:d,prefilledDealId:i,onCancel:()=>t.push("/"),activePackId:m,unlockedPackIds:p})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to use this feature"}),a.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-700",children:"Sign In"})]})})}(0,i.B)()},21021:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var a=t(10326);function r({children:e,className:s=""}){return a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${s}`,children:e})}t(17577)},87466:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r,l:()=>a});let a={first_time:{id:"first_time",name:"First-Time Buyer Pack",description:"Guidance for first-time buyers: financing basics, affordability, clarity.",features:["Budget & credit band questions","APR & term definitions","OTD vs monthly education","First-time friendly scripts"],education:["OTD includes taxes, fees, and registration - focus on OTD, not monthly.","APR is the annualized cost of borrowing - compare against pre-approval if you have one.","Longer terms lower monthly payment but increase total interest paid."],questions:[{id:"budget",label:"Max OTD budget",type:"number",required:!0,placeholder:"e.g., 25000"},{id:"credit_band",label:"Credit range (approx)",type:"select",required:!1,options:[{value:"excellent",label:"Excellent (760+)"},{value:"good",label:"Good (700-759)"},{value:"fair",label:"Fair (640-699)"},{value:"new",label:"Limited/First-time"}]},{id:"down_payment_est",label:"Down payment estimate",type:"number",required:!1,placeholder:"e.g., 4000"},{id:"driving_needs",label:"Primary driving needs",type:"text",required:!1,placeholder:"e.g., commute 40 miles daily"}]},cash:{id:"cash",name:"Cash Buyer Pack",description:"Cash-specific tactics and proof-of-funds handling.",features:["Cash disclosure timing","Proof-of-funds guidance","OTD and fees focus","No monthly payment talk"],education:["Delay disclosing cash until you have negotiated price.","Have proof of funds ready, but share only when it helps close at your price.","Cash can justify lower price: simpler deal, no financing reserve for dealer."],questions:[{id:"proof_of_funds",label:"Do you have proof of funds?",type:"boolean",required:!1},{id:"disclose_cash",label:"When do you want to disclose cash?",type:"select",required:!1,options:[{value:"late",label:"Only after price is agreed"},{value:"mid",label:"After initial counter"},{value:"early",label:"I prefer to disclose early"}]},{id:"open_to_finance",label:"Open to financing if it reduces price?",type:"boolean",required:!1}],comingSoon:!0},financing:{id:"financing",name:"Financing Buyer Pack",description:"Financing coaching: APR, term, pre-approval leverage.",features:["Max monthly & OTD focus","Pre-approval leverage","APR/term questions","Payment anchoring avoidance"],education:["Negotiate OTD first, financing second - do not anchor on monthly payment.","Compare dealer APR against your pre-approval; ask if low APR is contingent on add-ons.","Shorter terms cost more monthly but less interest overall."],questions:[{id:"target_monthly",label:"Target monthly (optional)",type:"number",required:!1,placeholder:"e.g., 400"},{id:"max_otd",label:"Max OTD",type:"number",required:!0,placeholder:"e.g., 25000"},{id:"preferred_term",label:"Preferred term",type:"select",required:!1,options:[{value:"36",label:"36 mo"},{value:"48",label:"48 mo"},{value:"60",label:"60 mo"},{value:"72",label:"72 mo"}]},{id:"pre_approved",label:"Do you have pre-approval?",type:"boolean",required:!1},{id:"pre_approval_rate",label:"Pre-approval APR",type:"number",required:!1,placeholder:"e.g., 5.5"}],comingSoon:!0},in_person:{id:"in_person",name:"In-Person Negotiation Pack",description:"Dealership talk tracks and pressure handling.",features:["Short talk tracks","Manager/pressure tactics","If they say X → say Y","Closing script for OTD"],education:["Practice your talk track - don't rely on recording; use written notes instead.",'If "manager" pressure starts, slow down: ask for written OTD before deciding.',"Have 2-3 calm phrases ready for add-on upsells."],questions:[{id:"comfort_firm",label:"Comfort being firm?",type:"select",required:!1,options:[{value:"low",label:"Prefer soft approach"},{value:"medium",label:"Comfortable pushing back politely"},{value:"high",label:"Very firm when needed"}]},{id:"expected_objections",label:"Objections you expect",type:"textarea",required:!1,placeholder:'e.g., "Price is already low", "Manager approval needed".'},{id:"has_trade_in",label:"Trade-in?",type:"boolean",required:!1}]},bundle:{id:"bundle",name:"Complete Bundle",description:"Get both packs at a discounted price: First-Time Buyer Pack + In-Person Negotiation Pack.",features:["Everything in First-Time Buyer Pack","Everything in In-Person Negotiation Pack","Best value for comprehensive coverage","Unlock both packs with one purchase"],education:["The bundle includes all features from both individual packs.","Perfect if you want complete guidance from first contact through in-person negotiation.","Save money compared to buying packs separately."],questions:[]}};function r(e){return a[e]||a.first_time}},29855:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\dev\Dealership Copilot\app\script\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,3786,2883],()=>t(64659));module.exports=a})();