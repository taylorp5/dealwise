(()=>{var e={};e.id=6352,e.ids=[6352],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86953:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.Z,__next_app__:()=>x,originalPathname:()=>c,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(69156),t(46855),t(26083),t(35866);var a=t(23191),r=t(88716),l=t(48001),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let d=["",{children:["copilot",{children:["free",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,69156)),"C:\\dev\\Dealership Copilot\\app\\copilot\\free\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,46855)),"C:\\dev\\Dealership Copilot\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,26083)),"C:\\dev\\Dealership Copilot\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\dev\\Dealership Copilot\\app\\copilot\\free\\page.tsx"],c="/copilot/free/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/copilot/free/page",pathname:"/copilot/free",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34100:(e,s,t)=>{Promise.resolve().then(t.bind(t,96727))},96727:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(10326),r=t(17577),l=t(35047),i=t(33136),n=t(21021),d=t(3679),o=t(8903);t(57166);let c=(0,o.B)();function x(){let{user:e,loading:s}=(0,i.a)();(0,l.useRouter)();let[t,o]=(0,r.useState)("first-time"),[x,u]=(0,r.useState)("initial_outreach"),[m,p]=(0,r.useState)("friendly"),[h,g]=(0,r.useState)("get_otd"),[b,j]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[C,w]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[_,T]=(0,r.useState)(!1),[D,P]=(0,r.useState)(null),[A,M]=(0,r.useState)(!1),[F,I]=(0,r.useState)("none"),[O,R]=(0,r.useState)(""),[q,B]=(0,r.useState)(""),[E,G]=(0,r.useState)(""),[Z,L]=(0,r.useState)(!1),[V,W]=(0,r.useState)(""),[Y,U]=(0,r.useState)(!1),[$,z]=(0,r.useState)(null),[H,K]=(0,r.useState)(null),[J,X]=(0,r.useState)(!1),Q=()=>b.trim()?v.trim()?"get_otd"!==h&&"close_today"!==h||y.trim()?isNaN(parseFloat(b))||0>=parseFloat(b)?"Vehicle price must be a valid number":y&&(isNaN(parseFloat(y))||0>=parseFloat(y))?"Desired OTD must be a valid number":null:"Desired OTD is required for this goal":"State is required":"Vehicle price is required",ee=async e=>{e.preventDefault(),K(null);let s=Q();if(s){K(s);return}U(!0);try{let{data:{session:e}}=await c.auth.getSession(),s={"Content-Type":"application/json"};e?.access_token&&(s.Authorization=`Bearer ${e.access_token}`);let a=localStorage.getItem("copilot_competitive_offers"),r=localStorage.getItem("scriptCarContext"),l=await fetch("/api/copilot/generate",{method:"POST",headers:s,body:JSON.stringify({buyerType:t,stage:x,tone:m,goal:h,vehiclePrice:parseFloat(b),desiredOTD:y?parseFloat(y):void 0,state:v.trim().toUpperCase(),registrationZip:C.trim()||void 0,taxRate:k?parseFloat(k):void 0,tradeIn:F,tradeInValue:"yes"===F&&O?parseFloat(O):void 0,preApprovalApr:Z&&q?parseFloat(q):void 0,maxMonthly:Z&&E?parseFloat(E):void 0,contextText:V.trim()||void 0,hasCompetitiveOffers:!!a,hasCarContext:!!r,mode:"free"})});if(!l.ok){let e=await l.text();throw Error(`Failed to generate: ${l.status} ${e}`)}let i=await l.json();if(!i.success)throw Error(i.error||"Failed to generate response");z({...i.data,effectiveMode:i.effectiveMode,entitlementCheck:i.entitlementCheck})}catch(e){K(e.message||"Failed to generate response")}finally{U(!1)}},es=e=>{navigator.clipboard.writeText(e)};return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("div",{className:"bg-blue-600 text-white text-center py-4 px-6 rounded-lg mb-4",children:a.jsx("h1",{className:"text-2xl font-bold",children:"FREE NEGOTIATION DRAFT BUILDER"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Negotiation Draft Builder"}),a.jsx("p",{className:"text-gray-600",children:"Get AI-powered negotiation messages tailored to your situation"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Z,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Your Situation"}),(0,a.jsxs)("form",{onSubmit:ee,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Buyer Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:t,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"first-time",children:"First-Time Buyer"}),a.jsx("option",{value:"cash",children:"Cash Buyer"}),a.jsx("option",{value:"financing",children:"Financing"}),a.jsx("option",{value:"lease",children:"Lease"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Negotiation Stage ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"initial_outreach",children:"Initial Outreach"}),a.jsx("option",{value:"after_quote",children:"After Quote Received"}),a.jsx("option",{value:"after_counter",children:"After Counter Offer"}),a.jsx("option",{value:"in_person_today",children:"In Person Today"}),a.jsx("option",{value:"final_paperwork",children:"Final Paperwork"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tone ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"friendly",children:"Friendly"}),a.jsx("option",{value:"neutral",children:"Neutral"}),a.jsx("option",{value:"firm",children:"Firm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Goal ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"get_otd",children:"Get OTD Price"}),a.jsx("option",{value:"reduce_addons",children:"Reduce Add-ons"}),a.jsx("option",{value:"lower_price",children:"Lower Price"}),a.jsx("option",{value:"schedule_visit_otd",children:"Schedule Visit (OTD)"}),a.jsx("option",{value:"close_today",children:"Close Today"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Vehicle Price ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:b,onChange:e=>j(e.target.value),placeholder:"e.g., 25000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Desired OTD ",("get_otd"===h||"close_today"===h)&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:y,onChange:e=>f(e.target.value),placeholder:"e.g., 28000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:"get_otd"===h||"close_today"===h})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["State ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:v,onChange:e=>N(e.target.value.toUpperCase()),placeholder:"e.g., CA",maxLength:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration ZIP Code (Optional)"}),a.jsx("input",{type:"text",value:C,onChange:e=>{w(e.target.value.replace(/\D/g,"").slice(0,5)),T(!1)},placeholder:"90210",maxLength:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",step:"0.01",value:k,onChange:e=>{S(e.target.value),T(!0)},placeholder:"6.5",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),A&&a.jsx("div",{className:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})]}),a.jsx("p",{className:"mt-1.5 text-xs text-gray-500 italic",children:"This information needs to be verified by the user. Tax rates may vary by location and vehicle type."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade-In"}),(0,a.jsxs)("select",{value:F,onChange:e=>I(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"none",children:"No Trade-In"}),a.jsx("option",{value:"maybe",children:"Maybe"}),a.jsx("option",{value:"yes",children:"Yes"})]})]}),"yes"===F&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade-In Value"}),a.jsx("input",{type:"number",value:O,onChange:e=>R(e.target.value),placeholder:"e.g., 5000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dealer Message (Optional)"}),a.jsx("textarea",{value:V,onChange:e=>W(e.target.value),placeholder:"Paste dealer message here...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),a.jsx("div",{children:(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Z,onChange:e=>L(e.target.checked),className:"mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Include Financing Details"})]})}),Z&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pre-Approval APR (%)"}),a.jsx("input",{type:"number",step:"0.01",value:q,onChange:e=>B(e.target.value),placeholder:"4.5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),Z&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Monthly Payment"}),a.jsx("input",{type:"number",value:E,onChange:e=>G(e.target.value),placeholder:"500",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),H&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-700",children:H})}),a.jsx(d.Z,{type:"submit",className:"w-full",disabled:Y,children:Y?"Generating...":"Generate Message"})]})]}),(0,a.jsxs)(n.Z,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Your Message"}),!$&&!Y&&a.jsx("div",{className:"text-center py-12 text-gray-500",children:a.jsx("p",{children:'Fill out the form and click "Generate Message" to get started'})}),Y&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Generating your message..."})]}),$&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center pb-2 border-b border-gray-200",children:["Mode: ",$.effectiveMode||"free"," ",$.entitlementCheck&&`(${$.entitlementCheck})`]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Best Next Message"}),a.jsx(d.Z,{size:"sm",variant:"secondary",onClick:()=>es($.bestNextMessage),children:"\uD83D\uDCCB Copy"})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-3",children:a.jsx("p",{className:"text-gray-800 whitespace-pre-wrap font-medium",children:$.bestNextMessage})}),$.whyThisWorks&&(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Why this works:"}),a.jsx("p",{className:"text-sm text-gray-600",children:$.whyThisWorks})]}),a.jsx("p",{className:"text-xs text-gray-500 italic",children:"This is a high-level response. Paid packs unlock stage-specific scripts, add-on removal tactics, and dealer pressure handling."})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>X(!J),className:"w-full text-left flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Alternate Messages"}),a.jsx("span",{children:J?"−":"+"})]}),J&&(0,a.jsxs)("div",{className:"mt-3 space-y-3",children:[$.alternate1&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"More Friendly"}),a.jsx(d.Z,{size:"sm",variant:"secondary",onClick:()=>es($.alternate1),children:"\uD83D\uDCCB Copy"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:$.alternate1})]}),$.alternate2&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"More Firm"}),a.jsx(d.Z,{size:"sm",variant:"secondary",onClick:()=>es($.alternate2),children:"\uD83D\uDCCB Copy"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:$.alternate2})]})]})]}),$.checklist&&$.checklist.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Before You Reply, Make Sure You Have:"}),a.jsx("ul",{className:"space-y-2 mb-2",children:$.checklist.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-blue-600 mr-2",children:"✓"}),a.jsx("span",{className:"text-gray-700",children:e})]},s))}),a.jsx("p",{className:"text-xs text-gray-500 italic",children:"Paid packs include scripts to remove add-ons and challenge inflated fees."})]}),$.decisionTree&&$.decisionTree.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Common Dealer Replies"}),a.jsx("div",{className:"space-y-3",children:$.decisionTree.map((e,s)=>(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900 mb-2",children:['If they say: "',e.dealerReply,'"']}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap mb-2",children:e.suggestedResponse}),e.isIncomplete&&a.jsx("p",{className:"text-xs text-gray-500 italic mt-2 pt-2 border-t border-yellow-300",children:"Paid packs include fee-by-fee pushback scripts for this exact situation."})]},s))})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Assumptions Used"}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-2",children:[void 0!==$.assumptions.taxBaseRate&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State base tax rate: "}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[$.assumptions.taxBaseRate,"%"]})]}),$.assumptions.feeAssumptions&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Typical dealer fees: "}),a.jsx("span",{className:"text-sm text-gray-600",children:$.assumptions.feeAssumptions})]}),a.jsx("div",{className:"pt-2 border-t border-gray-300",children:a.jsx("p",{className:"text-xs text-gray-600",children:$.assumptions.disclaimer})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:[a.jsx("span",{className:"font-medium",children:"Want more leverage?"}),a.jsx("br",{}),a.jsx("span",{className:"text-xs",children:"Paid packs unlock deeper scripts for add-ons, financing pressure, and in-person negotiations."})]})})]})]})]})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to use this feature"}),a.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-700",children:"Sign In"})]})})}},21021:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var a=t(10326);function r({children:e,className:s=""}){return a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${s}`,children:e})}t(17577)},57166:(e,s,t)=>{"use strict";t.d(s,{R4:()=>r});let a={AL:2,AK:0,AZ:5.6,AR:6.5,CA:7.25,CO:2.9,CT:6.35,DE:0,FL:6,GA:4,HI:4.17,ID:6,IL:6.25,IN:7,IA:6,KS:6.5,KY:6,LA:4.45,ME:5.5,MD:6,MA:6.25,MI:6,MN:6.875,MS:5,MO:4.225,MT:0,NE:5.5,NV:6.85,NH:0,NJ:6.625,NM:5.125,NY:4,NC:4.75,ND:5,OH:5.75,OK:4.5,OR:0,PA:6,RI:7,SC:6,SD:4.5,TN:7,TX:6.25,UT:4.85,VT:6,VA:4.3,WA:6.5,WV:6,WI:5,WY:4,DC:6};function r(e){return a[e.toUpperCase().trim()]??null}},69156:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\dev\Dealership Copilot\app\copilot\free\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,3786,2883],()=>t(86953));module.exports=a})();