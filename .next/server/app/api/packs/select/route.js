"use strict";(()=>{var e={};e.id=6405,e.ids=[6405],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},74499:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>I});var r={};t.r(r),t.d(r,{POST:()=>l});var i=t(49303),a=t(88716),n=t(60670),o=t(87070),c=t(19692);async function l(e){try{let s=e.headers.get("authorization"),r=await (0,c.f)(),i=null;if(s?.startsWith("Bearer ")){let e=s.replace("Bearer ",""),{data:{user:a},error:n}=await r.auth.getUser(e);if(n||!a)return o.NextResponse.json({success:!1,error:"Invalid token"},{status:401});i=a.id;let{createClient:c}=await Promise.resolve().then(t.bind(t,37857)),l="https://vabikejehdmpfcyqrgrs.supabase.co",p=process.env.SUPABASE_SERVICE_ROLE_KEY;p?r=c(l,p,{auth:{persistSession:!1,autoRefreshToken:!1}}):(r=c(l,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q",{global:{headers:{Authorization:`Bearer ${e}`}},auth:{persistSession:!1}}),console.warn("SUPABASE_SERVICE_ROLE_KEY not set - RLS may block this operation. Set it in .env.local for server-side operations."))}else{let{data:{session:e}}=await r.auth.getSession();e?.user&&(i=e.user.id)}if(!i)return o.NextResponse.json({success:!1,error:"Unauthorized"},{status:401});let{packId:a}=await e.json();if(!a)return o.NextResponse.json({success:!1,error:"Missing packId"},{status:400});let{data:n,error:l}=await r.from("packs").select("id").eq("id",a).single();if(l||!n)return o.NextResponse.json({success:!1,error:"Pack not found"},{status:404});let{error:p}=await r.from("user_profiles").upsert({user_id:i,selected_pack_id:a,updated_at:new Date().toISOString()},{onConflict:"user_id"});if(p)throw p;return o.NextResponse.json({success:!0,packId:a})}catch(e){return console.error("Error selecting pack:",e),o.NextResponse.json({success:!1,error:e.message||"Failed to select pack"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/packs/select/route",pathname:"/api/packs/select",filename:"route",bundlePath:"app/api/packs/select/route"},resolvedPagePath:"C:\\dev\\Dealership Copilot\\app\\api\\packs\\select\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:I,serverHooks:d}=p,h="/api/packs/select/route";function m(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:I})}},19692:(e,s,t)=>{t.d(s,{$:()=>o,f:()=>c});var r=t(67721),i=t(71615);let a="https://vabikejehdmpfcyqrgrs.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q";if(!a||!n){let e=[];throw a||e.push("NEXT_PUBLIC_SUPABASE_URL"),n||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error(`[CRITICAL] Missing required Supabase environment variables: ${e.join(", ")}. These must be set in Vercel environment variables.`)}if(a.includes("placeholder")||n.includes("placeholder"))throw Error("[CRITICAL] Supabase environment variables contain placeholder values. Please set real values in Vercel environment variables.");if(a.length<10||n.length<10)throw Error("[CRITICAL] Supabase environment variables appear to be invalid (too short). Please verify they are set correctly in Vercel.");function o(){let e=(0,i.cookies)();return(0,r.createServerClient)("https://vabikejehdmpfcyqrgrs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q",{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:t,options:r})=>{e.set(s,t,r)})}catch(e){}}}})}let c=o}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,5972,7857,9702],()=>t(74499));module.exports=r})();