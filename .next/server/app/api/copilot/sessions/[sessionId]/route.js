"use strict";(()=>{var e={};e.id=851,e.ids=[851],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},74658:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>I,staticGenerationAsyncStorage:()=>d});var r={};t.r(r),t.d(r,{GET:()=>l});var i=t(49303),o=t(88716),n=t(60670),a=t(87070),c=t(19692);async function l(e,{params:s}){try{let e=await (0,c.f)(),{data:{session:t}}=await e.auth.getSession();if(!t?.user)return a.NextResponse.json({success:!1,error:"Unauthorized"},{status:401});let r=t.user.id,i=s.sessionId,{data:o,error:n}=await e.from("negotiation_sessions").select("*").eq("id",i).eq("user_id",r).single();if(n||!o)return a.NextResponse.json({success:!1,error:"Session not found"},{status:404});let{data:l,error:p}=await e.from("session_messages").select("*").eq("session_id",i).order("created_at",{ascending:!0});return p&&console.error("Error fetching messages:",p),a.NextResponse.json({success:!0,session:o,messages:l||[]})}catch(e){return console.error("Error fetching session:",e),a.NextResponse.json({success:!1,error:e.message||"Failed to fetch session"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/copilot/sessions/[sessionId]/route",pathname:"/api/copilot/sessions/[sessionId]",filename:"route",bundlePath:"app/api/copilot/sessions/[sessionId]/route"},resolvedPagePath:"C:\\dev\\Dealership Copilot\\app\\api\\copilot\\sessions\\[sessionId]\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:I}=p,h="/api/copilot/sessions/[sessionId]/route";function m(){return(0,n.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:d})}},19692:(e,s,t)=>{t.d(s,{$:()=>a,f:()=>c});var r=t(67721),i=t(71615);let o="https://vabikejehdmpfcyqrgrs.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q";if(!o||!n){let e=[];throw o||e.push("NEXT_PUBLIC_SUPABASE_URL"),n||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error(`[CRITICAL] Missing required Supabase environment variables: ${e.join(", ")}. These must be set in Vercel environment variables.`)}if(o.includes("placeholder")||n.includes("placeholder"))throw Error("[CRITICAL] Supabase environment variables contain placeholder values. Please set real values in Vercel environment variables.");if(o.length<10||n.length<10)throw Error("[CRITICAL] Supabase environment variables appear to be invalid (too short). Please verify they are set correctly in Vercel.");function a(){let e=(0,i.cookies)();return(0,r.createServerClient)("https://vabikejehdmpfcyqrgrs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhYmlrZWplaGRtcGZjeXFyZ3JzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzAzNDAsImV4cCI6MjA4MTA0NjM0MH0.X_Z7szu62swGviqYgtI2mxV3F1vX4UBYpuZYV2n7h4Q",{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:t,options:r})=>{e.set(s,t,r)})}catch(e){}}}})}let c=a}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,5972,7857,9702],()=>t(74658));module.exports=r})();