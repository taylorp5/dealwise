"use strict";exports.id=2111,exports.ids=[2111],exports.modules={72111:(e,t,s)=>{s.d(t,{Z:()=>u});var a=s(10326),r=s(17577),l=s(35047),i=s(33136),n=s(8903),o=s(3679),c=s(21021),d=s(62881);let m=(0,d.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),x=(0,d.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var h=s(66307);let y=(0,d.Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),g=(0,n.B)();function u({mode:e="free"}){let{user:t}=(0,i.a)();(0,l.useSearchParams)();let[s,n]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(null),v=async(e,t)=>{try{await navigator.clipboard.writeText(e),N(t),setTimeout(()=>N(null),2e3)}catch(e){console.error("Failed to copy:",e)}},k=async t=>{if(t.preventDefault(),s.trim()){u(!0),j(null);try{let{data:{session:t}}=await g.auth.getSession(),a={"Content-Type":"application/json"};t?.access_token&&(a.Authorization=`Bearer ${t.access_token}`);let r=await fetch("/api/analyze-listing",{method:"POST",headers:a,body:JSON.stringify({listingUrl:s,packVariant:"first-time"===e?"first_time":"in-person"===e?"in_person":"free"})});if(!r.ok){let e=await r.text().catch(()=>"");throw Error(`Analysis failed: HTTP ${r.status}. ${e.slice(0,300)}`)}let l=await r.json();if(!l?.success)throw Error(l?.error||"Failed to analyze listing");f(l.data||l),u(!1)}catch(e){j(e.message||"Failed to analyze listing"),u(!1)}}},Z=(()=>{if(!p)return null;let e=p.confidence||p.diagnostics?.confidence,t=p.price||p.askingPrice,s=p.year&&p.make&&p.model,a=p.issues&&p.issues.length>0;return p.blocked||p.diagnostics?.blocked||!t||!s?{status:"not-ready",icon:m,color:"red",title:"Not Ready â€” Missing Critical Info",message:'We need more information to provide a complete assessment. Please use "Copy from Listing Page" or "Manual Entry" to provide vehicle details.'}:a||void 0!==e&&e<.7?{status:"caution",icon:x,color:"yellow",title:"Proceed with Caution",message:"Some information may be incomplete or unclear. Review the details carefully before proceeding."}:{status:"ready",icon:h.Z,color:"green",title:"Ready to Proceed",message:"You have the key information needed. Review the assessment below before contacting the dealer."}})(),z=Z?.icon||h.Z;return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:["first-time"===e?(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deal Readiness / Confidence Assessment"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Expert review before you contact the dealer"})]}):(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Listing Analyzer"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Analyze vehicle listings and get deal insights"})]}),a.jsx(c.Z,{className:"mb-8 p-6",children:(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"listing-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing URL"}),a.jsx("input",{id:"listing-url",type:"url",value:s,onChange:e=>n(e.target.value),placeholder:"Paste vehicle listing URL here...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsx(o.Z,{type:"submit",disabled:d||!s.trim(),children:d?"Analyzing...":"Analyze Listing"})]})}),b&&a.jsx(c.Z,{className:"mb-8 p-6 bg-red-50 border-red-200",children:a.jsx("p",{className:"text-red-800",children:b})}),p&&(0,a.jsxs)("div",{className:"space-y-6",children:["first-time"===e&&Z&&a.jsx(c.Z,{className:`p-6 ${"red"===Z.color?"bg-red-50 border-red-200":"yellow"===Z.color?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx(z,{className:`w-6 h-6 flex-shrink-0 mt-1 ${"red"===Z.color?"text-red-600":"yellow"===Z.color?"text-yellow-600":"text-green-600"}`}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:`text-xl font-bold mb-2 ${"red"===Z.color?"text-red-900":"yellow"===Z.color?"text-yellow-900":"text-green-900"}`,children:Z.title}),a.jsx("p",{className:"red"===Z.color?"text-red-800":"yellow"===Z.color?"text-yellow-800":"text-green-800",children:Z.message})]})]})}),(0,a.jsxs)(c.Z,{className:"p-6",children:["first-time"===e?a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Deal Readiness Assessment"}):a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Deal Plan"}),(0,a.jsxs)("div",{className:"space-y-4",children:[p.price&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Asking Price: "}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["$",p.price.toLocaleString()]})]}),p.year&&p.make&&p.model&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Vehicle: "}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:[p.year," ",p.make," ",p.model]})]}),p.otdEstimate&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Estimated Out-the-Door Price"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:["$",p.otdEstimate.total?.toLocaleString()||"N/A"]})]})]})]}),"first-time"===e&&(0,a.jsxs)(c.Z,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"If you proceed, send this (written only)"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use these professional, beginner-safe messages when contacting the dealer. Copy and paste as needed."}),a.jsx("div",{className:"space-y-4",children:[{title:"Safe Opener",message:"Hi, I'm interested in this vehicle. Could you please send me a written itemized breakdown of the out-the-door price? I'd like to see the sale price, taxes, doc fee, title/registration fees, and any add-ons all on one sheet. Thank you!"},{title:"Clarify Add-ons",message:"Thank you for the breakdown. Could you clarify which items are optional versus mandatory? If any add-ons are required, I'd like to see the buyer's order or OTD worksheet in writing before we proceed. I want to make sure I understand the total cost clearly."},{title:"Disengage/Pause",message:"Thank you for the information. I'd like to review everything in writing and will follow up once I've had a chance to go through the details. I appreciate your patience."}].map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.title}),a.jsx(o.Z,{size:"sm",variant:"secondary",onClick:()=>v(e.message,t),className:"flex items-center gap-2",children:w===t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4"}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(y,{className:"w-4 h-4"}),"Copy"]})})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:e.message})]},t))})]})]})]})})}},21021:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(10326);function r({children:e,className:t=""}){return a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${t}`,children:e})}s(17577)},66307:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}};